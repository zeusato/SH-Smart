<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√†i ƒë·∫∑t & Add-ons</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Load Tesseract from local node_modules for browser compatibility in Electron -->
    <script src="../../node_modules/tesseract.js/dist/tesseract.min.js"></script>
</head>

<body>
    <div id="sidebar">
        <div class="sidebar-header">MENU</div>
        <div class="nav-item active" data-tab="general">Chung (General)</div>
        <div class="nav-item" data-tab="widget">Widget Gi√°</div>
        <div class="nav-item" data-tab="otp">Qu·∫£n l√Ω OTP</div>
        <div class="nav-item" data-tab="ai">Tr·ª£ l√Ω AI</div>
        <div class="nav-item" data-tab="shortcuts">Ph√≠m t·∫Øt</div>
        <div class="nav-item" data-tab="about">Th√¥ng tin</div>
    </div>

    <div id="content">
        <!-- Content injected by JS -->
        <div id="tab-general" class="tab-content">
            <h2>Qu·∫£n l√Ω Add-on & T√πy ch·ªânh</h2>

            <div class="settings-group">
                <h3>C·∫•u h√¨nh chung</h3>
                <label class="setting-item">
                    <input type="checkbox" id="chk-always-top"> Ghim c·ª≠a s·ªï l√™n tr√™n c√πng (Always on Top)
                </label>
                <label class="setting-item">
                    <input type="checkbox" id="chk-tray"> Thu nh·ªè xu·ªëng System Tray khi ƒë√≥ng
                </label>
                <div class="setting-item">
                    <label>M·ª©c Zoom m·∫∑c ƒë·ªãnh: <span id="summ-zoom">100%</span></label>
                    <input type="range" id="rng-zoom" min="80" max="150" step="5" value="100" style="width: 200px;">
                </div>
            </div>

            <div class="settings-group" style="margin-top: 20px; border-top: 1px solid #444; padding-top: 10px;">
                <h3>D·ªØ li·ªáu & Cache</h3>
                <p style="color: #aaa; font-size: 13px;">G·∫∑p l·ªói hi·ªÉn th·ªã? H√£y th·ª≠ x√≥a cache.</p>
                <button class="btn btn-danger" id="btn-clear-cache" style="background: #d9534f;">X√≥a Cache & T·∫£i
                    l·∫°i</button>
            </div>

            <!-- <button class="btn" id="btn-save-general">L∆∞u C√†i ƒê·∫∑t</button> -->
            <!-- Auto-save preferred for toggles, likely no need for manual save button if we bind change events -->
        </div>

        <div id="tab-otp" class="tab-content" style="display: none;">
            <h2>
                Danh s√°ch th·∫ª OTP
                <button class="btn" id="btn-add-otp">+ Th√™m m·ªõi</button>
            </h2>
            <div id="otp-list-container" style="display: flex;">
                <div id="otp-cards-list" style="width: 30%; padding-right: 10px; border-right: 1px solid #333;">
                    <!-- List of OTP cards -->
                    <div class="card-item">ƒêang t·∫£i...</div>
                </div>
                <div id="otp-detail-view" style="width: 70%; padding-left: 10px;">
                    <div id="otp-placeholder" style="color: #666; text-align: center; margin-top: 50px;">
                        Ch·ªçn m·ªôt th·∫ª ƒë·ªÉ xem ho·∫∑c th√™m m·ªõi
                    </div>

                    <!-- Add New Form -->
                    <div id="otp-add-form" style="display: none; position: relative;">
                        <button id="btn-delete-otp"
                            style="position: absolute; right: 0; top: -5px; background: transparent; border: none; font-size: 20px; cursor: pointer; color: #d9534f; display: none;"
                            title="X√≥a th·∫ª n√†y">üóëÔ∏è</button>
                        <h3>Th√™m th·∫ª OTP m·ªõi</h3>
                        <div class="form-group">
                            <label>T√™n Kh√°ch H√†ng / G·ª£i nh·ªõ</label>
                            <input type="text" id="otp-name" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A">
                        </div>
                        <div class="form-group">
                            <label>M·∫≠t kh·∫©u b·∫£o v·ªá</label>
                            <input type="password" id="otp-password" placeholder="Nh·∫≠p ƒë·ªÉ kh√≥a th·∫ª n√†y">
                        </div>
                        <div class="form-group">
                            <label>·∫¢nh th·∫ª Matrix (Ch·ª•p r√µ n√©t)</label>
                            <input type="file" id="otp-file" accept="image/*">
                        </div>
                        <div id="ocr-status" style="margin: 10px 0; font-size: 12px; color: #aaa;"></div>
                        <div id="otp-preview-area" style="display:none">
                            <h4>K·∫øt qu·∫£ nh·∫≠n di·ªán:</h4>
                            <div id="otp-grid-preview"></div>
                        </div>
                        <div id="save-error-msg"
                            style="color: #e74c3c; font-size: 13px; margin-bottom: 10px; display: none;"></div>
                        <div style="margin-top: 15px;">
                            <button class="btn" id="btn-save-otp" disabled>L∆∞u Th·∫ª</button>
                            <button class="btn" style="background: #444;" onclick="cancelAddOtp()">H·ªßy</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-shortcuts" class="tab-content" style="display: none;">
            <h2>Ph√≠m t·∫Øt (Keyboard Shortcuts)</h2>
            <div class="settings-group">
                <h3>ƒêi·ªÅu h∆∞·ªõng Menu</h3>
                <table class="shortcuts-table">
                    <tr>
                        <td class="key">F1</td>
                        <td>B·∫£ng gi√°</td>
                    </tr>
                    <tr>
                        <td class="key">F2</td>
                        <td>Th·ªã tr∆∞·ªùng</td>
                    </tr>
                    <tr>
                        <td class="key">F3</td>
                        <td>Giao d·ªãch</td>
                    </tr>
                    <tr>
                        <td class="key">F4</td>
                        <td>T√†i s·∫£n</td>
                    </tr>
                    <tr>
                        <td class="key">F5</td>
                        <td>Qu·∫£n l√Ω ti·ªÅn</td>
                    </tr>
                    <tr>
                        <td class="key">F6</td>
                        <td>B√°o c√°o</td>
                    </tr>
                    <tr>
                        <td class="key">F7</td>
                        <td>Qu·∫£n l√Ω d·ªãch v·ª•</td>
                    </tr>
                </table>
            </div>
            <div class="settings-group">
                <h3>Ch·ª©c nƒÉng nhanh</h3>
                <table class="shortcuts-table">
                    <tr>
                        <td class="key">F8</td>
                        <td>Trung t√¢m th√¥ng b√°o (Notification)</td>
                    </tr>
                    <tr>
                        <td class="key">F9</td>
                        <td>T√¨m ki·∫øm m√£ ch·ª©ng kho√°n</td>
                    </tr>
                </table>
            </div>
            <div class="settings-group">
                <h3>M·∫πo s·ª≠ d·ª•ng</h3>
                <p style="color: #aaa; font-size: 13px; line-height: 1.6;">
                    ‚Ä¢ Khi website y√™u c·∫ßu m√£ OTP, h·ªá th·ªëng t·ª± ƒë·ªông hi·ªÉn th·ªã m√£ n·∫øu th·∫ª ƒë√£ m·ªü kh√≥a.<br>
                    ‚Ä¢ N·∫øu th·∫ª ch∆∞a m·ªü kh√≥a, popup nh·∫≠p m·∫≠t kh·∫©u s·∫Ω xu·∫•t hi·ªán.<br>
                    ‚Ä¢ M√£ OTP hi·ªÉn th·ªã d·∫°ng Toast l·ªõn ·ªü gi·ªØa m√†n h√¨nh trong 5 gi√¢y.
                </p>
            </div>
        </div>

        <div id="tab-widget" class="tab-content" style="display: none;">
            <h2>C·∫•u h√¨nh Widget Gi√°</h2>
            <div class="settings-group">
                <h3>Tr·∫°ng th√°i</h3>
                <label class="setting-item">
                    <input type="checkbox" id="chk-widget-enable"> B·∫≠t Widget C·∫£nh b√°o gi√°
                </label>
                <p style="color: #aaa; font-size: 13px;">Widget s·∫Ω hi·ªán n·ªïi tr√™n m√†n h√¨nh desktop.</p>
            </div>

            <div class="settings-group">
                <h3>Danh m·ª•c theo d√µi (T·ªëi ƒëa 5 m√£)</h3>
                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <input type="text" class="watchlist-input" maxlength="3" placeholder="M√£ 1">
                    <input type="text" class="watchlist-input" maxlength="3" placeholder="M√£ 2">
                    <input type="text" class="watchlist-input" maxlength="3" placeholder="M√£ 3">
                    <input type="text" class="watchlist-input" maxlength="3" placeholder="M√£ 4">
                    <input type="text" class="watchlist-input" maxlength="3" placeholder="M√£ 5">
                    <button id="btn-clear-watchlist" class="btn"
                        style="padding: 5px 10px; background: #c0392b; white-space: nowrap; margin-left: 5px;"
                        title="X√≥a to√†n b·ªô">X</button>
                </div>
                <p style="color: #aaa; font-size: 13px;">Nh·∫≠p m√£ c·ªï phi·∫øu (V√≠ d·ª•: HPG, SSI, VPB...). ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng
                    d√πng.</p>
            </div>
        </div>

        <div id="tab-ai" class="tab-content" style="display: none;">
            <h2>C·∫•u h√¨nh Tr·ª£ l√Ω AI</h2>
            <div class="settings-group">
                <h3>Tr·∫°ng th√°i & K·∫øt n·ªëi</h3>
                <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between;">
                    <span>B·∫≠t t√≠nh nƒÉng Tr·ª£ l√Ω AI (C·∫ßn Restart)</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="chk-ai-enable">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <label>Google Gemini API Key</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="password" id="inp-ai-key" placeholder="Nh·∫≠p API Key b·∫Øt ƒë·∫ßu b·∫±ng AIza..."
                            style="flex: 1; padding: 8px; background: #333; color: #fff; border: 1px solid #555;">
                        <button id="btn-save-ai-key" class="btn" style="background: #28a745;">L∆∞u</button>
                        <button id="btn-clear-ai-key" class="btn" style="background: #c0392b;">X√≥a</button>
                    </div>
                    <p style="font-size: 13px; color: #ccc; margin-top: 8px; line-height: 1.5;">
                        <span style="color: #aaa;">Ch∆∞a c√≥ Key?</span>
                        <a href="#"
                            onclick="require('electron').shell.openExternal('https://aistudio.google.com/api-keys')"
                            style="color: #4daafc; text-decoration: none;">üëâ B·∫•m v√†o ƒë√¢y ƒë·ªÉ l·∫•y Key mi·ªÖn ph√≠ t·ª´ Google
                            AI Studio</a>
                        <br><span style="font-size: 11px; color: #666;">(Ch·ªçn "Create API Key" -> Copy chu·ªói b·∫Øt ƒë·∫ßu
                            b·∫±ng AIza...)</span>
                    </p>
                </div>
            </div>
            <div class="settings-group">
                <h3>T√πy ch·ªânh</h3>
                <p style="color: #aaa; font-size: 13px;">S·ª≠ d·ª•ng model: <b>gemini-3-flash-preview</b></p>
            </div>
        </div>

        <div id="tab-about" class="tab-content" style="display: none;">
            <h2>Th√¥ng tin ·ª©ng d·ª•ng</h2>
            <div class="about-info">
                <p><strong>Phi√™n b·∫£n:</strong> <span id="app-version">1.0.3</span></p>
                <p><strong>Ng√†y ph√°t h√†nh:</strong> 19/01/2026</p>
                <p><strong>T√°c gi·∫£:</strong> Nguy·ªÖn M·∫°nh Quy·∫øt (PTSP)</p>
                <div class="disclaimer">
                    <strong>L∆∞u √Ω:</strong> ·ª®ng d·ª•ng t·∫°o ra ƒë·ªÉ s·ª≠ d·ª•ng cho m·ª•c ƒë√≠ch c√° nh√¢n kh√¥ng ƒë·∫°i di·ªán hay thay th·∫ø
                    cho b·∫•t c·ª© k√™nh giao d·ªãch ch√≠nh th·ªëng n√†o c·ªßa SHS. T√°c gi·∫£ tuy√™n b·ªë mi·ªÖn tr·ª´ m·ªçi tr√°ch nhi·ªám.
                </div>
            </div>
        </div>
    </div>

    <!-- Password Modal -->
    <div id="password-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Nh·∫≠p m·∫≠t kh·∫©u th·∫ª</h3>
            <div class="form-group">
                <input type="password" id="modal-password-input" placeholder="M·∫≠t kh·∫©u b·∫£o v·ªá...">
                <div id="modal-error-msg" class="error-msg"
                    style="display:none; margin-top: 5px; color: #ff5555; font-size: 13px;"></div>
            </div>
            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                <button class="btn" style="background: #555;" id="btn-modal-cancel">H·ªßy</button>
                <button class="btn" id="btn-modal-confirm">M·ªü kh√≥a</button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>

</html>